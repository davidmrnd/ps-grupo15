<header>

  <div class="header-container">
    <div class="left-container">
      <div class="logo-container">
        <a routerLink="/"><img src="/assets/images/logo.webp" alt="Logo"></a>
      </div>
      <nav class="nav-links">
        <a routerLink="/">{{ 'header.home' | translate }}</a>
        <a routerLink="/categories">{{ 'header.categories' | translate }}</a>
        <a *ngIf="isLoggedIn; else redirectToLogin" routerLink="/following"> {{ 'header.following' | translate }}</a>
        <ng-template #redirectToLogin>
          <a routerLink="/login">{{ 'header.following' | translate }}</a>
        </ng-template>
      </nav>
      <button class="menu-button">☰</button>


    </div>

    <div class="search-container">
      <input
        type="text"
        class="search-box"
        placeholder="{{ 'header.search' | translate }}"
        [(ngModel)]="searchText"
        (keydown)="onKeyDowmInSearchInput($event)"
      />
      <div class="search-toggle">
        <input type="radio" id="user" name="searchType" value="user" [(ngModel)]="searchType" />
        <label for="user">{{ 'header.toogle.user' | translate }}</label>
        <input type="radio" id="videogame" name="searchType" value="videogame" [(ngModel)]="searchType" />
        <label for="videogame">{{ 'header.toogle.videogame' | translate }}</label>
        <div class="toggle-slider"></div>
      </div>
      <button class="search-button" (click)="onSearchButtonClicked()">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <circle cx="9" cy="9" r="8" stroke="black" stroke-width="2"/>
          <line x1="14" y1="14" x2="19" y2="19" stroke="black" stroke-width="2"/>
        </svg>
      </button>
    </div>

    <app-search-results
      [searchResults]="searchResults"
      [searchType]="searchType"
      (searchResultClicked)="clearSearchText()"
      [showSearchResults]="showSearchResults"
    ></app-search-results>

    <div class="right-container">
      <div class="dark-mode-switch">
        <span class="icon-sun">☀️</span>
        <label class="switch">
          <input type="checkbox" [checked]="isDarkModeEnabled" (change)="toggleDarkMode()">
          <span class="slider"></span>
        </label>
        <span class="icon-moon">🌙</span>
      </div>
      <ng-container *ngIf="isLoggedIn; else guestButtons">
        <div class="user-dropdown-container" (click)="toggleUserDropdown()" tabindex="0">
          <img class="profile-img" [src]="userProfileIcon" alt="Perfil">
          <div class="user-dropdown" *ngIf="showUserDropdown">
            <a [routerLink]="['/user', userId]" (click)="closeUserDropdown()">
              <i class="fas fa-user"></i> Mi Perfil
            </a>
            <button (click)="logout(); closeUserDropdown()" class="logout-dropdown-btn logout-red">
              <i class="fas fa-sign-out-alt"></i> Cerrar sesión
            </button>
          </div>
        </div>
      </ng-container>
      <ng-template #guestButtons>
        <a routerLink="/registration"><button class="cta-button">{{ 'header.sign_up' | translate }}</button></a>
        <a routerLink="/login" class="login-text">{{ 'header.login' | translate}}</a>
      </ng-template>
    </div>
  </div>
</header>
